import{N as D,S as h,X as M,_ as k,a as o,aa as p,b as u,ea as R,fa as x,ob as g,pb as y}from"./chunk-MQPNP6GE.js";function W(e){let t=g(()=>e());return F(t)?new Proxy(e,{get(n,r){return r in t?(R(n[r])||Object.defineProperty(n,r,{value:y(()=>n()[r]),configurable:!0}),W(n[r])):n[r]}}):e}var z=[WeakSet,WeakMap,Promise,Date,Error,RegExp,ArrayBuffer,DataView,Function];function F(e){if(e===null||typeof e!="object"||q(e))return!1;let t=Object.getPrototypeOf(e);if(t===Object.prototype)return!0;for(;t&&t!==Object.prototype;){if(z.includes(t.constructor))return!1;t=Object.getPrototypeOf(t)}return t===Object.prototype}function q(e){return typeof e?.[Symbol.iterator]=="function"}var m=new WeakMap,s=Symbol("STATE_SOURCE");function w(e,...t){e[s].update(n=>t.reduce((r,c)=>o(o({},r),typeof c=="function"?c(r):c),n)),B(e)}function E(e){return e[s]()}function S(e,t,n){n?.injector||M(S);let c=(n?.injector??h(k)).get(p);V(e,t),t(E(e));let i=()=>_(e,t);return c.onDestroy(i),{destroy:i}}function j(e){return m.get(e[s])||[]}function B(e){let t=j(e);for(let n of t){let r=g(()=>E(e));n(r)}}function V(e,t){let n=j(e);m.set(e[s],[...n,t])}function _(e,t){let n=j(e);m.set(e[s],n.filter(r=>r!==t))}function T(...e){let t=[...e],n=typeof t[0]=="function"?{}:t.shift(),r=t;return(()=>{class i{constructor(){let a=r.reduce((d,U)=>U(d),G()),{stateSignals:l,props:O,methods:A,hooks:H}=a,b=o(o(o({},l),O),A);this[s]=a[s];for(let d of Reflect.ownKeys(b))this[d]=b[d];let{onInit:I,onDestroy:v}=H;I&&I(),v&&h(p).onDestroy(v)}static \u0275fac=function(l){return new(l||i)};static \u0275prov=D({token:i,factory:i.\u0275fac,providedIn:n.providedIn||null})}return i})()}function G(){return{[s]:x({}),stateSignals:{},props:{},methods:{},hooks:{}}}function C(e){return t=>{let n=o(o(o({[s]:t[s]},t.stateSignals),t.props),t.methods),r=typeof e=="function"?e(n):e,c=i=>{let f=r[i],a=t.hooks[i];return f?()=>{a&&a(),f(n)}:a};return u(o({},t),{hooks:{onInit:c("onInit"),onDestroy:c("onDestroy")}})}}function P(e){return t=>{let n=e(o(o(o({[s]:t[s]},t.stateSignals),t.props),t.methods));return Reflect.ownKeys(n),u(o({},t),{methods:o(o({},t.methods),n)})}}function K(e){return t=>{let n=typeof e=="function"?e():e,r=Reflect.ownKeys(n);t[s].update(i=>o(o({},i),n));let c=r.reduce((i,f)=>{let a=y(()=>t[s]()[f]);return u(o({},i),{[f]:W(a)})},{});return u(o({},t),{stateSignals:o(o({},t.stateSignals),c)})}}var J=[],et=T({providedIn:"root"},K({wisharr:J}),P(e=>({addtowish:t=>w(e,{wisharr:[...e.wisharr(),t]}),removefromwish:t=>w(e,{wisharr:e.wisharr().filter(n=>n.id!==t)}),isInwish:t=>e.wisharr().some(n=>n.id===t),getWishItems:()=>e.wisharr(),toggleProduct(t,n){t.stopPropagation(),this.isInwish(n.id)?this.removefromwish(n.id):this.addtowish(n)}})),C({onInit(e){console.log("Store Initialized");let t=S(e,n=>{console.log("Counter changed to:",n.wisharr)})},onDestroy(e){console.log("Store Destroyed")}}));export{et as a};
